<!DOCTYPE html>
<html>
<head>
    <title>Direct React App Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: white; }
        .container { max-width: 800px; margin: 0 auto; }
        .test-section { background: #2d2d2d; padding: 20px; margin: 20px 0; border-radius: 8px; }
        button { background: #3b82f6; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        button:hover { background: #2563eb; }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        iframe { width: 100%; height: 600px; border: 1px solid #444; border-radius: 8px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Direct React App Test</h1>
        
        <div class="test-section">
            <h2>React App (Direct Access)</h2>
            <p>If you can see the Job Tracker app below, it's working!</p>
            <iframe src="http://localhost:5175/" id="react-frame"></iframe>
        </div>
        
        <div class="test-section">
            <h2>Test localStorage Communication</h2>
            <button onclick="testLocalStorage()">Test localStorage</button>
            <button onclick="simulateJob()">Simulate Job Application</button>
            <div id="test-results"></div>
        </div>
        
        <div class="test-section">
            <h2>Available Ports</h2>
            <button onclick="checkPort(5173)">Check 5173</button>
            <button onclick="checkPort(5174)">Check 5174</button>
            <button onclick="checkPort(5175)">Check 5175</button>
            <button onclick="checkPort(5176)">Check 5176</button>
            <button onclick="checkPort(5177)">Check 5177</button>
            <button onclick="checkPort(5178)">Check 5178</button>
            <div id="port-results"></div>
        </div>
    </div>

    <script>
        function testLocalStorage() {
            const result = document.getElementById('test-results');
            try {
                localStorage.setItem('test', 'working');
                const value = localStorage.getItem('test');
                if (value === 'working') {
                    result.innerHTML = '<span class="success">‚úÖ localStorage is working!</span>';
                } else {
                    result.innerHTML = '<span class="error">‚ùå localStorage test failed</span>';
                }
            } catch (e) {
                result.innerHTML = '<span class="error">‚ùå localStorage error: ' + e.message + '</span>';
            }
        }
        
        function simulateJob() {
            const result = document.getElementById('test-results');
            const testJob = {
                title: 'Test Software Engineer',
                company: 'Test Company Inc.',
                url: 'https://test.com/job',
                applied: new Date().toISOString()
            };
            
            try {
                // Store job in localStorage
                localStorage.setItem('newJob', JSON.stringify(testJob));
                localStorage.setItem('newJobTimestamp', Date.now().toString());
                
                // Dispatch custom event
                window.dispatchEvent(new CustomEvent('job-tracker-new-job', { 
                    detail: testJob 
                }));
                
                result.innerHTML = '<span class="success">‚úÖ Job simulation sent! Check React app above.</span>';
                console.log('üß™ Test job dispatched:', testJob);
            } catch (e) {
                result.innerHTML = '<span class="error">‚ùå Job simulation failed: ' + e.message + '</span>';
            }
        }
        
        function checkPort(port) {
            const result = document.getElementById('port-results');
            const iframe = document.createElement('iframe');
            iframe.src = `http://localhost:${port}/`;
            iframe.style.width = '100%';
            iframe.style.height = '200px';
            iframe.style.border = '1px solid #444';
            iframe.style.margin = '10px 0';
            
            iframe.onload = () => {
                result.innerHTML += `<div><span class="success">‚úÖ Port ${port} is working!</span></div>`;
            };
            
            iframe.onerror = () => {
                result.innerHTML += `<div><span class="error">‚ùå Port ${port} not accessible</span></div>`;
            };
            
            result.appendChild(iframe);
        }
        
        // Auto-run localStorage test
        window.addEventListener('load', () => {
            console.log('üß™ Test page loaded');
            testLocalStorage();
        });
    </script>
</body>
</html>


